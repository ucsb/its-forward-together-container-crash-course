<!doctype html>
<html lang="en">
    <head>
	<meta charset="utf-8">

	<title>Container Crash Course -- UCSB ITS 2024 </title>

	<meta name="description" content="Workshop slides for Container Crash Course">
	<meta name="author" content="tamsin woo">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css">
	<link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
	<link rel="stylesheet" href="node_modules/reveal.js/dist/theme/black.css" id="theme">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css">
    </head>

    <body>
	<div class="reveal">
	    <!-- Any section element inside of this container is displayed as a slide -->
	    <div class="slides">
		<section data-background="#09847A">
		    <h2>Container Crash Course</h2>
		    <p>
			<small>UCSB ITS <em>Forward Together</em> - 2024</small>
		    </p>
		</section>

                <section data-background="#003660" data-background-transition="zoom">
		    <h2>Overview</h2>
		    <ol>
			<li>What is a Container Anyway?</li>
			<li>Building & Running Container Images</li>
                        <li>Containers As Development Tooling</li>
			<li class="fragment">ORCHESTRATION</li>
		    </ol>
                    <p>
                        <small><em>with some exercises along the way</em></small>
                    </p>
		</section>

                <section data-background="#9CBEBE">
                    <h2>What is a Container Anyway?</h2>
                    <p><span class="fragment">A self-contained</span><span class="fragment">, isolated</span><span class="fragment">, portable runtime environment.</span></p>
                    <p class="fragment">Containers are implemented with <code>linux</code> kernel features like <code>cgroups</code> and <code>chroot</code>.</p>
                </section>

                <section data-background="#9CBEBE" data-background-transition="zoom">
                    <h2 class="r-fit-text">Elevator Pitch</h2>
                    <p class="fragment">... OR <span class="fragment">why have containers conquered the world?</span></p>
                </section>

                <section data-background="#EF5645" data-background-transition="zoom">
                    <h2>Building Container Images</h2>
                    <span class="fragment">
                        <h3>An image is:</h3>
                        <ul>
                            <li>a tarball of the file system and configuration for a container</li>
                            <li>an immutable artifact</li>
                            <li>specified with a <code>Dockerfile</code></li>
                        </ul>
                    </span>
                </section>

                <section data-background="#EF5645">
                    <pre data-id="code-animation"><code class="hljs dockerfile" data-trim data-line-numbers>
                    FROM node:23.0.0-alpine3.19

                    WORKDIR /home/node/app

                    COPY ./package.json /home/node/app
                    RUN npm install

                    COPY . /home/node/app

                    EXPOSE 8001

                    CMD npm start
                    </pre></code>
                </section>

                <section data-background="#003660" data-background-transition="zoom">
                    <section>
		        <h2>Exercise 1 - Building a Static Site</h2>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs sh" data-trim data-line-numbers>
                          $ git clone \
                              https://github.com/ucsb/its-forward-together-container-crash-course
                          $ cd its-forward-together-container-crash-course
                          $ cd exercise1
                          $ docker build -t hello_world .
                          $ docker run -p 8080:80 hello_world
			</code></pre>
                    </section>
                    <section>
                        <h3>tips</h3>
                        <pre data-id="code-animation"><code class="hljs sh" data-trim data-line-numbers>
                          $ docker ps # list running container processes
                          $ docker system info # useful runtime environment info
                          $ docker system prune # drop unused container data (stop filling my disk with old images!)
			</code></pre>
                    </section>
		</section>

                <section data-background="#003660" data-background-transition="zoom">
                    <section>
		        <h2>Exercise 2 - Update a Dynamic Application</h2>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs sh" data-trim data-line-numbers>
                          $ cd ../exercise2
                          $ docker build -t hello_redis .
                          $ docker run -p 3000:3000 hello_redis
			</code></pre>
                    </section>
                    <section>
                        Initial result should be:
                        <img src="hello-num.png"></img>
                    </section>
                    <section>
                        Update the application to get:
                        <img src="not-resolve.png"></img>
                    </section>
		</section>

                <section data-background="#EF5645" data-background-transition="zoom">
                    <h2>Aside About Layers</h2>
                    <img src="https://docs.docker.com/get-started/docker-concepts/building-images/images/container_image_layer_reuse.webp"></img>
                </section>

                <section data-background="#6D7D33" data-background-transition="zoom">
                    <h2>Containers As Development Tooling</h2>
                    <ul class="fragment">
                        <li>application dependencies are self-contained</li>
                        <li>components/services are isolated</li>
                        <li>implementation is portable & setup is standardized</li>
                    </ul>
                </section>

                <section data-background="#6D7D33">
                    <h2>Multi-container Applications</h2>
                </section>

                <section data-background="#003660" data-background-transition="zoom">
                    <section>
                        <h2>Exercise 3: Docker Compose</h2>

                        <aside class="notes"><a href="https://docs.docker.com/compose/">docker-compose</a></aside>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs yaml" data-trim data-line-numbers>
services:
  web:
    build: ../exercise2
    ports:
      - "3000:3000"
  redis:
    image: "redis:alpine"
			</code></pre>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs sh" data-trim data-line-numbers>
$ cd ../exercise3
$ docker compose up --build
                        </pre></code>

                        <pre data-id="code-animation"><code class="hljs sh" data-trim data-line-numbers>
$ curl -X POST "http://localhost:3000/?name=Moomin"
                        </pre></code>
                    </section>
                </section>

                <section data-background="#047C91" data-background-transition="zoom">
                    <h2 class="r-fit-text">Kubernetes Basics</h2>
                </section>

                <section data-background="#047C91">
                    <section>
                        <h2>Declarative <em>Desired State</em></h2>
                        <p class="fragment">OR... what if your job wasn't to maintain servers, and instead you wrote YAML files.</p>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs yaml" data-trim data-line-numbers>
apiVersion: batch/v1
kind: Job
metadata:
  name: pi
spec:
  template:
    spec:
      containers:
      - name: pi
        image: perl:5.34.0
        command: ["perl",  "-Mbignum=bpi", "-wle", "print bpi(2000)"]
      restartPolicy: Never
  backoffLimit: 4
                        </pre></code>
                    </section>
                    <section>
                        <pre data-id="code-animation"><code class="hljs yaml" data-trim data-line-numbers>
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
                        </pre></code>
                    </section>
                </section>

                <section data-background="#047C91">
                    <h2>Control Loops</h2>
                </section>

                <section data-background="#047C91">
                    <section>
                        <h2 class="r-fit-text">k8s Sandbox Time</h2>
                    </section>

                    <section>
                        <pre data-id="code-animation"><code class="hljs yaml" data-trim data-line-numbers>
			</code></pre>
                    </section>

                    <section>
                        <h2>Resources</h2>
                        <ol>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ol>
                    </section>
                </section>

                <section data-background="#DCD6CC" data-background-transition="zoom">
                    <h2>Misc Resources</h2>
                    <ul>
                        <li><a href="https://docs.docker.com/get-started/workshop/09_image_best/">Image Building Best Practices</a></li>
                        <li><a href="https://learning.oreilly.com/library/view/container-security/9781492056690/?sso_link=yes&sso_link_from=university-of-california-santa-barbara">Container Security</a><em>, by Liz Rice</em></li>
                        <li><a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/">Kubernetes Tutorials</a> with <code>minikube</code></li>
                    </ul>
                </section>
            </div>
	</div>

	<script src="node_modules/reveal.js/dist/reveal.js"></script>
	<script src="node_modules/reveal.js/plugin/zoom/zoom.js"></script>
	<script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
	<script src="node_modules/reveal.js/plugin/search/search.js"></script>
	<script src="node_modules/reveal.js/plugin/markdown/markdown.js"></script>
	<script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
	<script>

	 // Also available as an ES module, see:
	 // https://revealjs.com/initialization/
	 Reveal.initialize({
	     controls: true,
	     progress: true,
	     center: true,
	     hash: true,

	     // Learn about plugins: https://revealjs.com/plugins/
	     plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
	 });

	</script>

    </body>
</html>
